<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>UNIKOR • Despesas</title>
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#1e7f46">
  <link rel="stylesheet" href="./css/style.css">
</head>
<body>
  <header class="topbar">
    <img class="logo" src="/assets/logo/unikorverde-logo.svg" alt="UNIKOR" onerror="this.remove()">
    <div>Despesas • NFC-e (QR) & NFe-55 (XML)</div>
  </header>

  <main class="wrap">
    <section class="card">
      <h2>Capturar NFC-e (QR)</h2>
      <div class="row">
        <label>Categoria</label>
        <select id="inpCat">
          <option>ALIMENTAÇÃO</option><option>MANUTENÇÃO</option>
          <option>COMBUSTÍVEL</option><option>LIMPEZA</option>
          <option>EMBALAGENS</option><option selected>GERAL</option>
        </select>
      </div>
      <div class="grid2">
        <input id="inpQr" placeholder="Cole a URL do QR da NFC-e"/>
        <button id="btnQrIngest" class="btn primary">Processar NFC-e</button>
      </div>
    </section>

    <section class="card">
      <h2>Enviar XML (NFe-55)</h2>
      <div class="grid2">
        <input id="inpXml" type="file" accept=".xml"/>
        <button id="btnXmlIngest" class="btn">Processar XML</button>
      </div>
    </section>

    <section class="card">
      <h2>Status</h2>
      <pre id="outMsg" class="preview">Pronto.</pre>
      <div class="actions">
        <button class="btn outline" onclick="location.reload()">Recarregar</button>
        <button class="btn outline" onclick="navigator.serviceWorker?.getRegistration().then(r=>r?.active?.postMessage({type:'SKIP_WAITING'})).then(()=>location.reload())">Atualizar SW</button>
      </div>
    </section>
  </main>

  <script type="module" src="./js/app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      addEventListener('load', ()=>navigator.serviceWorker.register('./sw.js'));
    }
  </script>
</body>
</html>
